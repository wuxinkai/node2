<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  用户名<input class="text" name="username" type="text"><br>
  年龄<input name="age" type="text" class="text2">
  <input onclick="sub()" name="age" type="button" value="注册">
  <h1 id="box"></h1>
</body>

</html>
<script type="text/javascript">
  function sub() {

    var username = document.querySelector('input[name="username"]').value;
    var age = document.querySelector('input[name="age"]').value;
    var user = {
      username: username,
      age: age,
    }

    //创建ajax对象
    var xhr = new XMLHttpRequest();
    //指定参数， 发送地址/clock
    xhr.open('POST', '/clock', true);
    //注册状态后回调函数
    xhr.onreadystatechange = function () {
      //当前状态和响应完毕
      //0 未初始化 对象建立 尚未初始化 尚未调用open方法
      //1 初始化  对象建立 尚未调用send方法
      //2 发送数据  send调用 但是当前的状态http头未知
      //3 数据传送中 已接收部分数据
      //4 xhr.readyState = 4完成  数据接收完成 responseBody和responseText获取完整的应用数据
      if (xhr.readyState = 4 && xhr.status == 200) {
        document.querySelector('#box').innerHTML = xhr.responseText
      } else {
        document.querySelector('#box').innerHTML = xhr.statusText
      }
    }
    //发送数据，
    xhr.send(JSON.stringify(user))
  };

  function tupain() {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/reg2', true)
    //设置响应类型
    xhr.responseText = 'text',
      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && /2\d{2}/.test(xhr.status)) {
          console.log(xhr.responseText);
          var img = document.createElement('img'); //创建一个img标签
          img.src = xhr.responseText;
          document.body.appendChecked(img)
        }
      }
  }
</script>